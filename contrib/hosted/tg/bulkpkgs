# $MirOS: src/share/misc/licence.template,v 1.28 2008/11/14 15:33:44 tg Rel $
#-
# Copyright (c) 2009
#	Thorsten Glaser <tg@mirbsd.org>
#
# Provided that these terms and disclaimer and all copyright notices
# are retained or reproduced in an accompanying document, permission
# is granted to deal in this work without restriction, including un-
# limited rights to use, publicly perform, distribute, sell, modify,
# merge, give away, or sublicence.
#
# This work is provided "AS IS" and WITHOUT WARRANTY of any kind, to
# the utmost extent permitted by applicable law, neither express nor
# implied; without malicious intent or gross negligence. In no event
# may a licensor, author or contributor be held liable for indirect,
# direct, other damage, loss, or other issues arising in any way out
# of dealing in the work, even if advised of the possibility of such
# damage or existence of a defect, except proven that it results out
# of said person's immediate fault when using the work as intended.
#-
# set arch to "none" to comment out (e.g. dependencies)

(( $# )) || exit 1
export BIN_PACKAGES=Yes TRUST_PACKAGES=Yes
machine=$(uname -m)
cd /usr/ports
mkdir -p Log_bulkpkgs
while read arch dir flavour; do
	[[ $arch = @(all|$machine) ]] || continue
	(print "============================================================"
		print "$(date)	>>> $dir\n"
		cd $dir
		env ${flavour:+FLAVOUR="$flavour"} "$@"; rv=$?
		print "\n===> $rv"
	) 2>&1 | tee -a Log_bulkpkgs/$(tr / _ <<<"$dir")
done <<-'EOF'
	all	archivers/bzip2
	all	archivers/lha
	all	archivers/lzma
	i386	archivers/mircpio
	all	audio/mpg123
	all	devel/gmake
	i386	devel/mirmake
	all	editors/joe
	all	editors/nano
	all	editors/vim/stable	huge no_x11 perl
	i386	essentials/cksum
	i386	essentials/pkgtools
	all	games/bsdgames
	all	math/ent
	all	misc/mc
	all	misc/screen
	all	net/djbdns
	all	net/openvpn
	all	net/rsync
	all	net/rsync		static
	all	net/sirc
	all	security/gnupg		no_idea
	all	security/tcpdump
	all	sysutils/cdrtools
	none	sysutils/daemontools
	i386	www/dillo/v2
	i386	x11/icewm
	i386	x11/xloadimage
EOF
