# $MirOS: contrib/hosted/tg/code/xchat-randex/Make_lnx,v 1.8 2011/12/16 20:12:20 tg Exp $
#-
# see main.c for copyright and licencing information

# platform notes: on i386, optimising for i686 will break the link
# because ld -r and the .gnu.linkonce thunking don't work together

EXTRA_FLAGS?=	-DUSE_INTTYPES -fPIC -DPIC -DOPPORTUNISTIC_ROOT_PUSHB

include Make_gnu

ifeq ($(shell (echo | ${CC} -march=i486 -E -) >/dev/null 2>&1 && echo ja),ja)
# do not produce __i686.get_pc_thunk.bx
EXTRA_FLAGS+=	-march=i486
endif
