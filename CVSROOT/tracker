#!/bin/mksh
# $MirOS: CVSROOT/tracker,v 1.6 2006/09/21 00:04:49 tg Exp $
#-
# Record the last directory where the current commit is taking place
# in for use by the mklogci and mklogtag scripts. Note that the pre-
# fix for temporary files (idea: tmpdir/prefix.*.commitid) is synced
# with the other files.

[[ -e $1/.tmp/do-dump ]] && (
	local argv
	set -A argv -- "$0" "$@"
	print "BEGIN calling information"
	integer i=0
	while (( i < ${#argv[*]} )); do
		print -nr -- "<${argv[i++]}> "
	done
	print
	#cat	#--> nothing on stdin here
	print "END calling information"
    ) | logger -t "CVS:dump"

print -r -- "$3" >$1/.tmp/cl.lastdir.$2
