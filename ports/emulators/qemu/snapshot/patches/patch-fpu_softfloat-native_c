$MirOS$
$OpenBSD: patch-fpu_softfloat-native_c,v 1.2 2007/05/01 12:55:14 todd Exp $
--- fpu/softfloat-native.c.orig	Sun Jan  6 19:38:19 2008
+++ fpu/softfloat-native.c	Wed May  7 14:00:12 2008
@@ -1,8 +1,13 @@
 /* Native implementation of soft float functions. Only a single status
    context is supported */
 #include "softfloat.h"
+#include "gnu-c99-math.h"
 #include <math.h>
 
+#ifdef _BSD
+#include <sys/param.h>
+#endif
+
 void set_float_rounding_mode(int val STATUS_PARAM)
 {
     STATUS(float_rounding_mode) = val;
@@ -22,7 +27,8 @@ void set_floatx80_rounding_precision(int
 }
 #endif
 
-#if defined(_BSD) || (defined(HOST_SOLARIS) && HOST_SOLARIS < 10)
+#if (defined(_BSD) && (!defined(MirBSD) || (MirBSD < 0x09A6))) || \
+    (defined(HOST_SOLARIS) && HOST_SOLARIS < 10)
 #define lrint(d)		((int32_t)rint(d))
 #define llrint(d)		((int64_t)rint(d))
 #define lrintf(f)		((int32_t)rint(f))
