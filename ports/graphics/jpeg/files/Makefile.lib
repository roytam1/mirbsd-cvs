# $MirOS: ports/graphics/jpeg/files/Makefile.lib,v 1.2 2005/09/11 23:46:15 tg Exp $

SRCDIR=		${.CURDIR}/..

LIB=		jpeg
SRCS=		jaricom.c jcapimin.c jcapistd.c jcarith.c jccoefct.c \
		jccolor.c jcdctmgr.c jchuff.c jcinit.c jcmainct.c \
		jcmarker.c jcmaster.c jcomapi.c jcparam.c jcphuff.c \
		jcprepct.c jcsample.c jctrans.c jdapimin.c jdapistd.c \
		jdarith.c jdatadst.c jdatasrc.c jdcoefct.c jdcolor.c \
		jddctmgr.c jdhuff.c jdinput.c jdmainct.c jdmarker.c \
		jdmaster.c jdmerge.c jdphuff.c jdpostct.c jdsample.c \
		jdtrans.c jerror.c jfdctflt.c jfdctfst.c jfdctint.c \
		jidctflt.c jidctfst.c jidctint.c jidctred.c jmemmgr.c \
		jmemnobs.c jquant1.c jquant2.c jutils.c 
INCLUDES=	jconfig.h jerror.h jmorecfg.h jpeglib.h
INCLUDEDIR=	${BSD_PREFIX}/include

NOMAN=		Yes

SHLIB_MAJOR=	62
SHLIB_MINOR=	0

INSTALL_DATA_DIR=	${BSD_INSTALL_DATA_DIR}
INSTALL_DATA=		${BSD_INSTALL_DATA}

.PATH:		${SRCDIR}

all: dstincs

# This is required because jmorecfg.h includes the definition whether
# arithmetic coding is supported or not.
dstincs: ${INCLUDES}
.for _i in ${INCLUDES}
	unifdef ${CPPFLAGS:M-[ID]*} ${CFLAGS:M-[ID]*} <${SRCDIR}/${_i} \
	    >${_i}.dist || test $$? -ne 2
.endfor

beforeinstall:
	${INSTALL_DATA_DIR} ${DESTDIR}${INCLUDEDIR}
.for _i in ${INCLUDES}
	${INSTALL_DATA} ${_i}.dist ${DESTDIR}${INCLUDEDIR}/${_i}
.endfor

.include <bsd.lib.mk>
