$MirOS$
--- src/history.c.orig	Sun Sep  4 02:41:06 2005
+++ src/history.c	Wed Sep 15 19:36:15 2010
@@ -191,6 +191,8 @@
 #include "history.h"
 #include "save-cwd.h"
 
+__RCSID("$MirOS: ports/devel/cvs/patches/patch-src_history_c,v 1.2 2007/03/10 23:53:49 tg Exp $");
+
 static struct hrec
 {
     char *type;		/* Type of record (In history record) */
@@ -379,7 +381,7 @@ sort_order (const void *l, const void *r
 static const char *
 get_history_log_name (time_t now)
 {
-    char *log_name;
+    char *log_name = NULL;
 
     if (config->HistoryLogPath)
     {
@@ -1561,7 +1563,7 @@ report_hrecs (void)
 	    tm = localtime (&(lr->date));
 
 	(void) printf ("%c %04d-%02d-%02d %02d:%02d %s %-*s", ty,
-		  tm->tm_year+1900, tm->tm_mon + 1, tm->tm_mday, tm->tm_hour,
+		  (int)(tm->tm_year+1900), tm->tm_mon + 1, tm->tm_mday, tm->tm_hour,
 		  tm->tm_min, tz_name, user_len, lr->user);
 
 	workdir = xmalloc (strlen (lr->dir) + strlen (lr->end) + 10);
