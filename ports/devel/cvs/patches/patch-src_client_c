$MirOS: ports/devel/cvs/patches/patch-src_client_c,v 1.1 2010/09/15 20:56:59 tg Exp $
--- src/client.c.orig	Sun Oct  2 15:16:58 2005
+++ src/client.c	Wed Sep 15 23:31:26 2010
@@ -20,6 +20,8 @@
 #include "buffer.h"
 #include "save-cwd.h"
 
+__RCSID("$MirOS: ports/devel/cvs/patches/patch-src_client_c,v 1.1 2010/09/15 20:56:59 tg Exp $");
+
 #ifdef CLIENT_SUPPORT
 
 # include "log-buffer.h"
@@ -4362,7 +4364,7 @@ send_modified (const char *file, const c
 	  sprintf (tmp, "%lu\n", (unsigned long) newsize);
 	  send_to_server (tmp, 0);
 
-          send_to_server (buf, newsize);
+          send_to_server ((const void *)buf, newsize);
         }
     }
     else
@@ -4415,7 +4417,7 @@ send_modified (const char *file, const c
 	 * one.
 	 */
 	if (newsize > 0)
-	    send_to_server (buf, newsize);
+	    send_to_server ((const void *)buf, newsize);
     }
     free (buf);
     free (mode_string);
@@ -4533,10 +4535,9 @@ warning: ignoring -k options due to serv
 	/* File no longer exists.  Don't do anything, missing files
 	   just happen.  */
     }
-    else if (!vers->ts_rcs || args->force
-	     || strcmp (vers->ts_conflict
-		        ? vers->ts_conflict : vers->ts_rcs, vers->ts_user)
-	     || (vers->ts_conflict && !strcmp (cvs_cmd_name, "diff")))
+    else if (vers->ts_rcs == NULL
+             || args->force
+             || strcmp (vers->ts_user, vers->ts_rcs) != 0)
     {
 	if (args->no_contents
 	    && supported_request ("Is-modified"))
