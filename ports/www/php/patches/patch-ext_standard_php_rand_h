$MirOS$
--- ext/standard/php_rand.h.orig	Mon Jan 19 02:30:32 2004
+++ ext/standard/php_rand.h	Wed Jan 25 18:53:56 2006
@@ -48,6 +48,8 @@
 
 #ifdef PHP_WIN32
 #define GENERATE_SEED() ((long) (time(0) * GetCurrentProcessId() * 1000000 * php_combined_lcg(TSRMLS_C)))
+#elif defined(HAVE_ARC4RANDOM)
+#define GENERATE_SEED() ((long) ((long long)arc4random() * (long long)arc4random()))
 #else
 #define GENERATE_SEED() ((long) (time(0) * getpid() * 1000000 * php_combined_lcg(TSRMLS_C)))
 #endif
