$MirOS$

	Add MirBSD; honour $CC, $CFLAGS

--- test.sh.orig	Sat Aug 16 00:17:14 2008
+++ test.sh	Thu Oct 30 16:43:36 2008
@@ -57,7 +57,7 @@ SYS=`uname -s`
 MACH=`uname -m`
 
 if test "$SYS" = "Linux" || test "$SYS" = "FreeBSD" || \
-	test "$SYS" = "OpenBSD"; then
+	test "$SYS" = "OpenBSD" || test "$SYS" = "MirBSD"; then
 	if test "$MACH" = "x86_64" || test "$MACH" = "amd64"; then
 		if test "$NWCC_ASM" != ""; then
 			BASEASM=`basename $NWCC_ASM`
@@ -124,8 +124,9 @@ if test `uname -p` = sparc; then
 	GCC_CFLAGS="-m64"
 fi
 
+: ${CC=gcc}
 try_files() {
-	if ! gcc $GCC_CFLAGS $FILES >/dev/null 2>/dev/null; then
+	if ! $CC $CFLAGS $GCC_CFLAGS $FILES >/dev/null 2>/dev/null; then
 		echo "gcc error"
 		continue
 	fi	
