$MirOS$
--- libiax2/src/iax.c.orig	Fri Jun 17 20:03:45 2005
+++ libiax2/src/iax.c	Fri Jun 17 20:06:11 2005
@@ -52,21 +52,14 @@ void gettimeofday(struct timeval *tv, st
 #include <arpa/inet.h>
 #include <time.h>
 
-#ifndef MACOSX
-#include <malloc.h>
-#ifndef SOLARIS
-#include <error.h>
 #endif
-#endif
 
-#endif
-
 #ifdef NEWJB
 #include "jitterbuf.h"
 #endif
 
 #include "iax-client.h"
-#include "md5.h"
+#include <md5.h>
 
 /*
 	work around jitter-buffer shrinking in asterisk:
@@ -85,7 +78,7 @@ void gettimeofday(struct timeval *tv, st
 #ifdef MACOSX
 #define IAX_SOCKOPTS MSG_DONTWAIT
 #else
-#ifdef SOLARIS
+#if defined(SOLARIS) || !defined(MSG_NOSIGNAL)
 #define IAX_SOCKOPTS MSG_DONTWAIT
 #else  /* Linux and others */
 #define IAX_SOCKOPTS MSG_DONTWAIT | MSG_NOSIGNAL
