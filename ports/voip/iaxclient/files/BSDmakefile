# $MirOS: ports/voip/iaxclient/files/BSDmakefile,v 1.1 2005/06/17 20:24:21 tg Exp $

LIB=		iaxclient
NOPIC=		Yes

CFLAGS+=	-std=c99
CPPFLAGS+=	-I. -Igsm/inc -Ilibspeex/include -DLIBVER=\"CVS-20050617\" \
		-Iportaudio/pa_common -Iportaudio/pablio -Iportmixer/px_common
CPPFLAGS+=	-DSPEEX_PREPROCESS=1
CPPFLAGS+=	-DNEWJB
CPPFLAGS+=	-Ilibiax2/src -DLIBIAX
CPPFLAGS+=	-DSPEEX_EC=1

.include <bsd.own.mk>
.if ${MACHINE_OS} == "Darwin"
CPPFLAGS+=	-DMACOSX
SRCS+=		portmixer/px_mac_core/px_mac_core.c \
		portaudio/pa_common/pa_convert.c \
		portaudio/pa_mac_core/pa_mac_core.c

.else
CPPFLAGS+=	-DLINUX
SRCS+=		portmixer/px_unix_oss/px_unix_oss.c \
		portaudio/pa_unix_oss/pa_unix_oss.c \
		portaudio/pa_unix_oss/pa_unix.c
.endif

SRCS+=		gsm/src/add.c gsm/src/code.c gsm/src/debug.c \
		gsm/src/decode.c gsm/src/gsm_create.c gsm/src/gsm_decode.c \
		gsm/src/gsm_destroy.c gsm/src/gsm_encode.c \
		gsm/src/gsm_explode.c gsm/src/gsm_implode.c \
		gsm/src/gsm_option.c gsm/src/gsm_print.c gsm/src/long_term.c \
		gsm/src/lpc.c gsm/src/preprocess.c gsm/src/rpe.c \
		gsm/src/short_term.c gsm/src/table.c \
		portaudio/pa_common/pa_lib.c portaudio/pablio/pablio.c \
		portaudio/pablio/ringbuffer.c spandsp/plc.c audio_encode.c \
		audio_portaudio.c audio_file.c codec_gsm.c codec_ulaw.c \
		codec_alaw.c codec_speex.c jitterbuf.c iaxclient_lib.c \
		libspeex/nb_celp.c libspeex/sb_celp.c libspeex/lpc.c \
		libspeex/ltp.c libspeex/lsp.c libspeex/quant_lsp.c \
		libspeex/lsp_tables_nb.c libspeex/gain_table.c \
		libspeex/gain_table_lbr.c libspeex/cb_search.c \
		libspeex/filters.c libspeex/bits.c libspeex/modes.c \
		libspeex/speex.c libspeex/vq.c libspeex/high_lsp_tables.c \
		libspeex/vbr.c libspeex/hexc_table.c \
		libspeex/exc_5_256_table.c libspeex/exc_5_64_table.c \
		libspeex/exc_8_128_table.c libspeex/exc_10_32_table.c \
		libspeex/exc_10_16_table.c libspeex/exc_20_32_table.c \
		libspeex/hexc_10_32_table.c libspeex/misc.c \
		libspeex/speex_header.c libspeex/speex_callbacks.c \
		libspeex/math_approx.c libspeex/stereo.c \
		libspeex/preprocess.c libspeex/smallft.c \
		libspeex/lbr_48k_tables.c libspeex/jitter.c libspeex/mdf.c \
		unixfuncs.c libiax2/src/iax.c libiax2/src/iax2-parser.c

INCS=		iaxclient.h

beforeinstall:
	${BSD_INSTALL_DATA_DIR} ${DESTDIR}${PREFIX}/include
.for _i in ${INCS}
	${BSD_INSTALL_DATA} ${.CURDIR}/${_i} ${DESTDIR}${PREFIX}/include/
.endfor

.include <bsd.lib.mk>
