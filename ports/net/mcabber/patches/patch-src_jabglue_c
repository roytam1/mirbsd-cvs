$MirOS$
--- src/jabglue.c.orig	Sun Oct  5 20:54:04 2008
+++ src/jabglue.c	Sun Oct  5 21:08:45 2008
@@ -2622,6 +2622,8 @@ static void handle_packet_message(jconn 
         // No specific resource (this is certainly history)
         if (subj && *subj)
           mbuf = g_strdup_printf("The topic has been set to: %s", subj);
+	else
+	  mbuf = g_strdup_printf("internal error");
       } else {
         if (subj)
           mbuf = g_strdup_printf("%s has set the topic to: %s", r, subj);
