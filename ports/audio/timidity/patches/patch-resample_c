$OpenBSD: patch-resample_c,v 1.1 2001/07/05 10:48:24 espie Exp $
--- resample.c.orig	Mon May 20 13:09:27 1996
+++ resample.c	Fri Jul 30 20:47:58 2010
@@ -22,7 +22,12 @@
 
 #include <math.h>
 #include <stdio.h>
+
+#ifdef __OpenBSD__
+#include <stdlib.h>
+#else
 #include <malloc.h>
+#endif
 
 #include "config.h"
 #include "common.h"
@@ -708,7 +713,7 @@ void pre_resample(Sample * sp)
   while (--count)
     {
       vptr = src + (ofs >> FRACTION_BITS);
-      v1 = *(vptr - 1);
+      v1 = (vptr > src) ? (*(vptr - 1)) : 0;
       v2 = *vptr;
       v3 = *(vptr + 1);
       v4 = *(vptr + 2);
