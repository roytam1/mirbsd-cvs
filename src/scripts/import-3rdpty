#!/bin/mksh
# $MirOS: src/scripts/import-3rdpty,v 1.12 2005/07/21 19:23:07 tg Exp $
#-
# Copyright (c) 2004, 2005
#	Thorsten "mirabile" Glaser <tg@66h.42h.de>
#
# Licensee is hereby permitted to deal in this work without restric-
# tion, including unlimited rights to use, publicly perform, modify,
# merge, distribute, sell, give away or sublicence, provided all co-
# pyright notices above, these terms and the disclaimer are retained
# in all redistributions or reproduced in accompanying documentation
# or other materials provided with binary redistributions.
#
# All advertising materials mentioning features or use of this soft-
# ware must display the following acknowledgement:
#	This product includes material provided by Thorsten Glaser.
#
# Licensor hereby provides this work "AS IS" and WITHOUT WARRANTY of
# any kind, expressed or implied, to the maximum extent permitted by
# applicable law, but with the warranty of being written without ma-
# licious intent or gross negligence; in no event shall licensor, an
# author or contributor be held liable for any damage, direct, indi-
# rect or other, however caused, arising in any way out of the usage
# of this work, even if advised of the possibility of such damage.

print -r -- '========= $MirOS: src/scripts/import-3rdpty,v 1.12 2005/07/21 19:23:07 tg Exp $ ========='

ignlist=0
force=0
while getopts "fhnp" option; do
	case $option {
	f)	force=1
		;;
	h)	print Syntax:
		print "\t$0 [-fnp] module tag"
		print "\t$0 [-fnp] - path vendor tag"
		print modules: binutils cvs lynx openbsd rcs texinfo -
		exit 0
		;;
	n)	DO_CVS="print -- \$ cvs"
		;;
	p)	ignlist=1
		;;
	}
done
shift $((OPTIND - 1))

module="$1"; shift

case $module {
binutils)

	# take them from
	#	ftp://sourceware.org/pub/binutils/snapshots/
	#		e.g.	binutils-050605.tar.bz2
	#	ftp://sources.redhat.com/pub/gdb/snapshots/current/
	#		e.g.	gdb-6.3.50.20050605.tar.bz2

	IGNORELIST="\
		bfd/COPYING \
		bfd/ChangeLog* \
		bfd/MAINTAINERS \
		bfd/PORTING \
		bfd/README \
		bfd/TODO \
		bfd/configure.com \
		bfd/doc/*.info* \
		bfd/doc/ChangeLog* \
		bfd/doc/makefile.vms \
		bfd/makefile.vms \
		bfd/po \
		binutils/*lex.c \
		binutils/*parse.c \
		binutils/*parse.h \
		binutils/BRANCHES \
		binutils/ChangeLog* \
		binutils/MAINTAINERS \
		binutils/NEWS \
		binutils/README \
		binutils/configure.com \
		binutils/doc/*.1 \
		binutils/doc/*.info \
		binutils/doc/*.man \
		binutils/makefile.vms-in \
		binutils/nlmheader.c \
		binutils/nlmheader.h \
		binutils/not-* \
		binutils/po \
		binutils/sysinfo.c \
		binutils/sysinfo.h \
		binutils/testsuite \
		config/ChangeLog* \
		cpu/ChangeLog* \
		etc/*.info \
		gas/CONTRIBUTORS \
		gas/COPYING \
		gas/ChangeLog* \
		gas/MAINTAINERS \
		gas/NEWS \
		gas/README \
		gas/README-vms \
		gas/config-gas.com \
		gas/doc/*.info* \
		gas/itbl-lex.c \
		gas/itbl-parse.c \
		gas/itbl-parse.h \
		gas/make-gas.com \
		gas/makefile.vms \
		gas/po \
		gas/testsuite \
		gas/vmsconf.sh \
		gdb/*-exp.c \
		gdb/CONTRIBUTE \
		gdb/COPYING \
		gdb/ChangeLog* \
		gdb/MAINTAINERS \
		gdb/NEWS \
		gdb/PROBLEMS \
		gdb/README \
		gdb/cp-name-parser.c \
		gdb/doc/*.info* \
		gdb/doc/ChangeLog* \
		gdb/gdbserver \
		gdb/mi \
		gdb/nlm \
		gdb/osf-share \
		gdb/po \
		gdb/rdi-share \
		gdb/testsuite \
		gdb/tui \
		gdb/vx-share \
		gprof \
		include/*/ChangeLog* \
		include/COPYING \
		include/ChangeLog* \
		include/MAINTAINERS \
		intl \
		ld/ChangeLog* \
		ld/MAINTAINERS \
		ld/NEWS \
		ld/README \
		ld/TODO \
		ld/ld.1 \
		ld/ld.info \
		ld/ldgram.c \
		ld/ldgram.h \
		ld/ldlex.c \
		ld/po \
		ld/testsuite \
		libiberty/COPYING.LIB \
		libiberty/ChangeLog* \
		libiberty/README \
		libiberty/_doprnt.c \
		libiberty/alloca.c \
		libiberty/asprintf.c \
		libiberty/atexit.c \
		libiberty/basename.c \
		libiberty/bcmp.c \
		libiberty/bcopy.c \
		libiberty/bsearch.c \
		libiberty/bzero.c \
		libiberty/calloc.c \
		libiberty/choose-temp.c \
		libiberty/clock.c \
		libiberty/config \
		libiberty/config.h-vms \
		libiberty/config.table \
		libiberty/configure \
		libiberty/copying-lib.texi \
		libiberty/ffs.c \
		libiberty/fnmatch.c \
		libiberty/fnmatch.txh \
		libiberty/functions.texi \
		libiberty/gather-docs \
		libiberty/getcwd.c \
		libiberty/getopt.c \
		libiberty/getopt1.c \
		libiberty/getpagesize.c \
		libiberty/gettimeofday.c \
		libiberty/index.c \
		libiberty/insque.c \
		libiberty/libiberty.texi \
		libiberty/maint-tool \
		libiberty/makefile.vms \
		libiberty/md5.c \
		libiberty/memchr.c \
		libiberty/memcmp.c \
		libiberty/memcpy.c \
		libiberty/memmove.c \
		libiberty/memset.c \
		libiberty/mkstemps.c \
		libiberty/msdos.c \
		libiberty/obstacks.texi \
		libiberty/pex-djgpp.c \
		libiberty/pex-msdos.c \
		libiberty/pex-win32.c \
		libiberty/pexecute.txh \
		libiberty/putenv.c \
		libiberty/random.c \
		libiberty/regex.c \
		libiberty/rename.c \
		libiberty/rindex.c \
		libiberty/setenv.c \
		libiberty/sigsetmask.c \
		libiberty/snprintf.c \
		libiberty/strcasecmp.c \
		libiberty/strchr.c \
		libiberty/strdup.c \
		libiberty/strncasecmp.c \
		libiberty/strncmp.c \
		libiberty/strrchr.c \
		libiberty/strstr.c \
		libiberty/strtod.c \
		libiberty/strtol.c \
		libiberty/strtoul.c \
		libiberty/testsuite/Makefile.in \
		libiberty/tmpnam.c \
		libiberty/vasprintf.c \
		libiberty/vfork.c \
		libiberty/vfprintf.c \
		libiberty/vmsbuild.com \
		libiberty/vprintf.c \
		libiberty/vsnprintf.c \
		libiberty/vsprintf.c \
		libiberty/waitpid.c \
		opcodes/ChangeLog* \
		opcodes/MAINTAINERS \
		opcodes/ia64-asmtab.c \
		opcodes/makefile.vms \
		opcodes/po \
		texinfo \
	"
	vendor=FSF
	vpath=src/gnu/usr.bin/binutils
	;;
cvs)
	IGNORELIST="\
	"
	vendor=FSF
	vpath=src/gnu/usr.bin/cvs
	;;
lynx)
	IGNORELIST="\
		WWW/FreeofCharge.html \
		WWW/Library/VMS \
		WWW/Library/djgpp \
		docs/CHANGES* \
		docs/OS-390* \
		docs/SOCKETSHR.announce \
		docs/TCPWARE.announce \
		docs/VMSWAIS.announce \
		docs/djgpp.key \
		docs/win-386.announce \
		lib \
		po \
		samples/*VMS* \
		samples/lynx.com \
		scripts \
		src/*.opt \
		src/Xsystem.c \
		src/chrtrans/*.com \
		src/chrtrans/make-msc.bat \
		src/chrtrans/makefile.{bcb,dos,msc} \
		src/chrtrans/makew32.bat \
		src/descrip.mms \
		src/makefile.{dos,dsl,wsl} \
		src/mktime.c \
		src/strstr.c \
		*.com \
		ABOUT-NLS \
		CHANGES \
		COPYHEADER \
		COPYING \
		INSTALLATION \
		PROBLEMS \
		README \
		VMSPrint.com \
		config.guess \
		config.sub \
		descrip.mms \
		fixed512.com \
		install.sh \
		lynx.hlp \
		lynx.rsp \
		make-msc.bat \
		makefile.bcb \
		makefile.msc \
		makelynx.bat \
		makew32.bat \
		mkdirs.sh \
	"
	vendor=lynx
	vpath=src/gnu/usr.bin/lynx
	;;
openbsd)
	IGNORELIST="\
		Makefile.cross \
		bin/chio \
		bin/csh \
		bin/df/lfs_df.c \
		bin/domainname \
		bin/ksh \
		bin/rcp \
		bin/rmail \
		distrib/alpha \
		distrib/amd64 \
		distrib/cats \
		distrib/crunch \
		distrib/hp300 \
		distrib/hppa \
		distrib/hppa64 \
		distrib/i386/cdfs \
		distrib/i386/cdfs-emu \
		distrib/i386/ramdiskA \
		distrib/i386/ramdiskB \
		distrib/i386/ramdiskC \
		distrib/i386/ramdisk_cd \
		distrib/luna88k \
		distrib/mac68k \
		distrib/macppc \
		distrib/mvme68k \
		distrib/mvme88k \
		distrib/mvmeppc \
		distrib/notes \
		distrib/sets \
		distrib/sgi \
		distrib/sparc64 \
		distrib/special/gzip \
		distrib/special/ifconfig \
		distrib/vax \
		distrib/zaurus \
		etc/afs \
		etc/amd \
		etc/bgpd.conf \
		etc/bind \
		etc/csh.cshrc \
		etc/csh.login \
		etc/csh.logout \
		etc/etc.alpha \
		etc/etc.cats \
		etc/etc.hp300 \
		etc/etc.hppa \
		etc/etc.hppa64 \
		etc/etc.i386/INSTALL.linux \
		etc/etc.luna88k \
		etc/etc.mac68k \
		etc/etc.macppc \
		etc/etc.mvme68k \
		etc/etc.mvme88k \
		etc/etc.mvmeppc \
		etc/etc.sgi \
		etc/etc.sparc64 \
		etc/etc.svr4 \
		etc/etc.vax \
		etc/etc.zaurus \
		etc/hostapd.conf \
		etc/kerberosV \
		etc/ksh.kshrc \
		etc/mail \
		etc/mtree/4.4BSD.root \
		etc/mtree/4.4BSD.usr \
		etc/mtree/4.4BSD.var \
		etc/mtree/BSD.local.dist \
		etc/mtree/BSD.x11.dist \
		etc/ospfd.conf \
		etc/ppp/chatscript.sample,v \
		etc/ppp/options,v \
		etc/ppp/options.leaf,v \
		etc/root/dot.cshrc,v \
		etc/root/dot.klogin,v \
		etc/root/dot.login,v \
		etc/skel/dot.cshrc,v \
		etc/skel/dot.login,v \
		etc/systrace/usr_sbin_named \
		games \
		gnu/egcs \
		gnu/lib \
		gnu/share \
		gnu/usr.bin/binutils \
		gnu/usr.bin/cvs \
		gnu/usr.bin/cxxfilt \
		gnu/usr.bin/gas \
		gnu/usr.bin/gcc \
		gnu/usr.bin/groff \
		gnu/usr.bin/ld \
		gnu/usr.bin/lynx \
		gnu/usr.bin/rcs \
		gnu/usr.bin/sendbug \
		gnu/usr.bin/texinfo \
		gnu/usr.sbin/mkhybrid \
		include/rpcsvc \
		include/wchar.h \
		include/wctype.h \
		kerberosIV \
		kerberosV \
		lib/csu \
		lib/i18n_module \
		lib/libarch/alpha \
		lib/libarch/arm \
		lib/libasn1 \
		lib/libc/arch/alpha \
		lib/libc/arch/arm \
		lib/libc/arch/hppa \
		lib/libc/arch/hppa64 \
		lib/libc/arch/m68k \
		lib/libc/arch/m88k \
		lib/libc/arch/mips \
		lib/libc/arch/mips64 \
		lib/libc/arch/powerpc \
		lib/libc/arch/sparc64 \
		lib/libc/arch/vax \
		lib/libc/db/README \
		lib/libc/db/changelog \
		lib/libc/db/db2netbsd \
		lib/libc/db/hash/README \
		lib/libc/db/mpool/README \
		lib/libc/db/mpool/mpool.libtp \
		lib/libc/gmon \
		lib/libc/locale \
		lib/libc/md \
		lib/libc/nls \
		lib/libc/regex/WHATSNEW \
		lib/libc/rpc/DISCLAIMER \
		lib/libc/rpc/README \
		lib/libc/stdio/fgetwc.c \
		lib/libc/stdio/fgetws.3 \
		lib/libc/stdio/fgetws.c \
		lib/libc/stdio/fileext.h \
		lib/libc/stdio/fputwc.c \
		lib/libc/stdio/fputws.3 \
		lib/libc/stdio/fputws.c \
		lib/libc/stdio/fwide.3 \
		lib/libc/stdio/fwide.c \
		lib/libc/stdio/getwc.3 \
		lib/libc/stdio/getwc.c \
		lib/libc/stdio/getwchar.c \
		lib/libc/stdio/putwc.3 \
		lib/libc/stdio/putwc.c \
		lib/libc/stdio/putwchar.c \
		lib/libc/stdio/ungetwc.3 \
		lib/libc/stdio/ungetwc.c \
		lib/libc/stdio/wcio.h \
		lib/libc/yp \
		lib/libcom_err \
		lib/libcompat/regexp/COPYRIGHT \
		lib/libcurses++ \
		lib/libdes/README \
		lib/libdes/VERSION \
		lib/libdes/asm \
		lib/libdes/des_locl.org \
		lib/libedit/readline/Makefile \
		lib/libedit/tokenizer.h \
		lib/libevent/compat \
		lib/libevent/err.c \
		lib/libevent/sample \
		lib/libevent/test \
		lib/libexpat \
		lib/libgssapi \
		lib/libhdb \
		lib/libintl \
		lib/libkadm5clnt \
		lib/libkadm5srv \
		lib/libkafs \
		lib/libkrb5 \
		lib/libkvm/kvm_alpha.c \
		lib/libkvm/kvm_arm.c \
		lib/libkvm/kvm_hppa.c \
		lib/libkvm/kvm_m68k.c \
		lib/libkvm/kvm_m88k.c \
		lib/libkvm/kvm_mips64.c \
		lib/libkvm/kvm_powerpc.c \
		lib/libkvm/kvm_sparc64.c \
		lib/libkvm/kvm_vax.c \
		lib/libm/arch/alpha \
		lib/libm/arch/hppa \
		lib/libm/arch/hppa64 \
		lib/libm/arch/mc68881 \
		lib/libm/arch/vax \
		lib/libm/noieee_src \
		lib/libpcap/CHANGES \
		lib/libpcap/README \
		lib/libpthread/arch/alpha \
		lib/libpthread/arch/arm \
		lib/libpthread/arch/hppa \
		lib/libpthread/arch/hppa64 \
		lib/libpthread/arch/m68k \
		lib/libpthread/arch/m88k \
		lib/libpthread/arch/mips \
		lib/libpthread/arch/mips64 \
		lib/libpthread/arch/powerpc \
		lib/libpthread/arch/sparc64 \
		lib/libpthread/arch/vax \
		lib/librpcsvc/yp.x \
		lib/librpcsvc/yppasswd.x \
		lib/libssl/cert.pem \
		lib/libssl/crypto/arch/alpha \
		lib/libssl/crypto/arch/arm \
		lib/libssl/crypto/arch/hppa \
		lib/libssl/crypto/arch/m68k \
		lib/libssl/crypto/arch/m88k \
		lib/libssl/crypto/arch/mips \
		lib/libssl/crypto/arch/mips64 \
		lib/libssl/crypto/arch/powerpc \
		lib/libssl/crypto/arch/sparc64 \
		lib/libssl/crypto/arch/vax \
		lib/libssl/src/MacOS \
		lib/libssl/src/VMS \
		lib/libssl/src/apps/demoCA \
		lib/libssl/src/apps/set \
		lib/libssl/src/bugs \
		lib/libssl/src/certs \
		lib/libssl/src/demos \
		lib/libssl/src/ms \
		lib/libssl/src/os2 \
		lib/libssl/src/shlib \
		lib/libssl/src/test \
		lib/libssl/src/times \
		lib/libssl/src/tools \
		lib/libssl/src/util \
		lib/libwrap \
		lib/libz/ChangeLog \
		lib/libz/README \
		lib/libz/crc32.h \
		lib/libz/inffixed.h \
		lib/libz/trees.h \
		libexec/comsat \
		libexec/ftp-proxy \
		libexec/getNAME \
		libexec/ld.so/alpha \
		libexec/ld.so/arm \
		libexec/ld.so/hppa \
		libexec/ld.so/hppa64 \
		libexec/ld.so/mips \
		libexec/ld.so/mips64 \
		libexec/ld.so/powerpc/Makefile.inc \
		libexec/ld.so/powerpc/archdep.h \
		libexec/ld.so/powerpc/ldasm.S \
		libexec/ld.so/powerpc/rtld_machine.c \
		libexec/ld.so/powerpc/syscall.h \
		libexec/ld.so/sparc64 \
		libexec/lfs_cleanerd \
		libexec/login_kerberos \
		libexec/login_krb-or-pwd \
		libexec/login_krb4 \
		libexec/login_krb4-or-pwd \
		libexec/login_krb5 \
		libexec/login_krb5-or-pwd \
		libexec/rpc.yppasswdd \
		libexec/rshd \
		libexec/tcpd \
		libexec/uucpd \
		lkm \
		regress \
		sbin/dumplfs \
		sbin/fsirand \
		sbin/mount_ados \
		sbin/mount_lfs \
		sbin/mount_udf \
		sbin/mount_xfs \
		sbin/newlfs \
		sbin/pdisk \
		share/doc/psd/13.rcs \
		share/doc/usd/02.learn \
		share/doc/usd/30.rogue \
		share/ipsec \
		share/lkm \
		share/man/man0 \
		share/man/man4/man4.alpha \
		share/man/man4/man4.cats \
		share/man/man4/man4.hp300 \
		share/man/man4/man4.hppa \
		share/man/man4/man4.hppa64 \
		share/man/man4/man4.luna88k \
		share/man/man4/man4.mac68k \
		share/man/man4/man4.macppc \
		share/man/man4/man4.mvme68k \
		share/man/man4/man4.mvme88k \
		share/man/man4/man4.pegasos \
		share/man/man4/man4.sgi \
		share/man/man4/man4.sparc64 \
		share/man/man4/man4.vax \
		share/man/man4/man4.zaurus \
		share/man/man8/man8.alpha \
		share/man/man8/man8.cats \
		share/man/man8/man8.hp300 \
		share/man/man8/man8.hppa \
		share/man/man8/man8.hppa64 \
		share/man/man8/man8.luna88k \
		share/man/man8/man8.mac68k \
		share/man/man8/man8.macppc \
		share/man/man8/man8.mvme68k \
		share/man/man8/man8.mvme88k \
		share/man/man8/man8.pegasos \
		share/man/man8/man8.sgi \
		share/man/man8/man8.sparc64 \
		share/man/man8/man8.vax \
		share/man/man8/man8.zaurus \
		share/misc/pcvtfonts \
		share/mk/bsd.nls.mk \
		share/mk/bsd.port.mk \
		share/mk/bsd.port.subdir.mk \
		share/mk/bsd.regress.mk \
		share/pf \
		share/termtypes/README \
		share/termtypes/map3270 \
		sys/adosfs \
		sys/arch/alpha \
		sys/arch/arm \
		sys/arch/cats \
		sys/arch/hp300 \
		sys/arch/hppa \
		sys/arch/hppa64 \
		sys/arch/i386/eisa \
		sys/arch/i386/stand/biosboot \
		sys/arch/i386/stand/cdboot \
		sys/arch/i386/stand/cdbr \
		sys/arch/i386/stand/mbr \
		sys/arch/luna88k \
		sys/arch/m68k \
		sys/arch/m88k \
		sys/arch/mac68k \
		sys/arch/mips64 \
		sys/arch/mvme68k \
		sys/arch/mvme88k \
		sys/arch/mvmeppc \
		sys/arch/sgi \
		sys/arch/sparc64 \
		sys/arch/vax \
		sys/arch/zaurus \
		sys/compat/aout \
		sys/compat/bsdos \
		sys/compat/freebsd \
		sys/compat/hpux \
		sys/compat/ibcs2 \
		sys/compat/m68k4k \
		sys/compat/netbsd \
		sys/compat/osf1 \
		sys/compat/sunos \
		sys/compat/svr4 \
		sys/compat/ultrix \
		sys/compat/vax1k \
		sys/dev/dec \
		sys/dev/eisa \
		sys/dev/hil \
		sys/dev/tc \
		sys/gnu \
		sys/lib/libkern/arch/alpha \
		sys/lib/libkern/arch/arm \
		sys/lib/libkern/arch/hppa \
		sys/lib/libkern/arch/hppa64 \
		sys/lib/libkern/arch/m68k \
		sys/lib/libkern/arch/m88k \
		sys/lib/libkern/arch/mips64 \
		sys/lib/libkern/arch/sparc64 \
		sys/lib/libkern/arch/vax \
		sys/lib/libz \
		sys/netccitt \
		sys/netiso \
		sys/netns \
		sys/ufs/lfs \
		sys/xfs \
		usr.bin/apply \
		usr.bin/ar \
		usr.bin/asa \
		usr.bin/asn1_compile \
		usr.bin/aucat \
		usr.bin/banner \
		usr.bin/bdes \
		usr.bin/biff \
		usr.bin/cc \
		usr.bin/compile_et \
		usr.bin/compress/doc \
		usr.bin/cpp \
		usr.bin/cvs \
		usr.bin/elf2ecoff \
		usr.bin/error \
		usr.bin/fgen \
		usr.bin/from \
		usr.bin/fsplit \
		usr.bin/gencat \
		usr.bin/gprof \
		usr.bin/lam \
		usr.bin/learn \
		usr.bin/leave \
		usr.bin/mg \
		usr.bin/mkdep/mkdep.gcc.sh \
		usr.bin/mkstr \
		usr.bin/nm \
		usr.bin/oldrdist \
		usr.bin/pmdb/arch/alpha \
		usr.bin/pmdb/arch/arm \
		usr.bin/pmdb/arch/hppa \
		usr.bin/pmdb/arch/hppa64 \
		usr.bin/pmdb/arch/m68k \
		usr.bin/pmdb/arch/m88k \
		usr.bin/pmdb/arch/mips64 \
		usr.bin/pmdb/arch/powerpc \
		usr.bin/pmdb/arch/sparc64 \
		usr.bin/pmdb/arch/vax \
		usr.bin/ranlib \
		usr.bin/rcs \
		usr.bin/rdist \
		usr.bin/rdistd \
		usr.bin/rsh \
		usr.bin/size \
		usr.bin/stat \
		usr.bin/strings \
		usr.bin/strip \
		usr.bin/sudo/CHANGES \
		usr.bin/sudo/INSTALL \
		usr.bin/sudo/INSTALL.configure \
		usr.bin/sudo/Makefile.in \
		usr.bin/sudo/aclocal.m4 \
		usr.bin/sudo/config.guess \
		usr.bin/sudo/config.h.in \
		usr.bin/sudo/config.sub \
		usr.bin/sudo/configure \
		usr.bin/sudo/configure.in \
		usr.bin/sudo/def_data.in \
		usr.bin/sudo/indent.pro \
		usr.bin/sudo/install-sh \
		usr.bin/sudo/mkdefaults \
		usr.bin/sudo/mkinstalldirs \
		usr.bin/sudo/pathnames.h.in \
		usr.bin/sup \
		usr.bin/tn3270 \
		usr.bin/vacation \
		usr.bin/ypcat \
		usr.bin/ypmatch \
		usr.bin/ypwhich \
		usr.sbin/acpid \
		usr.sbin/acpidump \
		usr.sbin/afs \
		usr.sbin/amd \
		usr.sbin/bgpctl \
		usr.sbin/bgpd \
		usr.sbin/bind \
		usr.sbin/catman \
		usr.sbin/grfinfo \
		usr.sbin/hilinfo \
		usr.sbin/hostapd \
		usr.sbin/hotplugd \
		usr.sbin/httpd/conf/ssl.crl \
		usr.sbin/httpd/conf/ssl.crt \
		usr.sbin/httpd/conf/ssl.csr \
		usr.sbin/httpd/conf/ssl.key \
		usr.sbin/httpd/conf/ssl.prm \
		usr.sbin/httpd/htdocs/manual/search \
		usr.sbin/httpd/icons/small \
		usr.sbin/httpd/src/lib \
		usr.sbin/httpd/src/regex \
		usr.sbin/kgmon \
		usr.sbin/mopd \
		usr.sbin/ospfctl \
		usr.sbin/ospfd \
		usr.sbin/pkg \
		usr.sbin/pkg_add \
		usr.sbin/pkg_install \
		usr.sbin/sasyncd \
		usr.sbin/ypbind \
		usr.sbin/yppoll \
		usr.sbin/ypserv \
		usr.sbin/ypset \
		usr.sbin/ztsscale \
	"
	vendor=openbsd
	vpath=src
	;;
rcs)
	IGNORELIST="\
	"
	vendor=FSF
	vpath=src/gnu/usr.bin/rcs
	;;
texinfo)
	IGNORELIST="\
	"
	vendor=FSF
	vpath=src/gnu/usr.bin/texinfo
	;;
-)
	IGNORELIST=
	case $1 in
	gcc)
		if [[ -e gcc/gcc ]]; then
			print 'Do you know what you are doing?'
			pwd
			abort=1
		fi
		vpath="$1" ;;
	@(ports|contrib|testing|gcc)*)
		if [[ -e $1 && $force != 1 ]]; then
			print 'Do you know what you are doing?'
			pwd
			abort=1
		fi
		if [[ $force != 1 && $1 = ports* ]]; then
			print 'Importing into ports is deprecated.'
			abort=1
		elif [[ $force != 1 && $1 = testing* ]]; then
			print 'If so, try again with -f option.'
			abort=1
		fi
		vpath="$1" ;;
	[xX]11)
		if [ ! -e xc ]; then
			print 'Do you know what you are doing?'
			pwd
			abort=1
		fi
		if [[ $force != 1 ]]; then
			print 'Before importing X, consult advice.'
			abort=1
		fi
		vpath="X11" ;;
	@(x11|X11)*)
		if [[ -e $1 ]]; then
			print 'Do you know what you are doing?'
			pwd
			abort=1
		fi
		if [[ $force != 1 ]]; then
			print 'Before importing X, consult advice.'
			abort=1
		fi
		vpath="X11${1#@(x11|X11)}" ;;
	src*)
		if [[ -e $1 && $force != 1 ]]; then
			print 'Do you know what you are doing?'
			pwd
			abort=1
		fi
		if [[ $force = 1 ]]; then
			vpath="$1"
		elif [[ $2 != openbsd ]]; then
			vpath="$1"
		elif [[ $1 = src ]]; then
			print Error: this is a different module...
			abort=1
		else
			vpath="$1"
		fi ;;
	*)
		if [[ $force != 1 ]]; then
			print Error: you do not want to import here!
			abort=1
		fi ;;
	esac
	[[ $abort = 1 ]] && exit 1
	shift
	vendor=$1
	if [[ -z $vendor ]]; then
		print No vendor given.
		exit 1
	fi
	shift
	;;
*)
	print Error: unknown module "'$module'"
	exec $0 -h
	;;
}

if [[ $ignlist = 1 ]]; then
	print -- $IGNORELIST
	exit 0
fi

case $vendor {
  openbsd)	B=1.1.1;   V=openbsd	;; # The OpenBSD project
  tnf|netb*)	B=1.1.3;   V=TNF	;; # The NetBSD(TM) foundation
  ekkobsd)	B=1.1.5;   V=ekkobsd	;; # The ekkoBSD project
  mirbsd)	B=1.1.7;   V=mirbsd	;; # Old MirBSD/MirOS content
  freeb*)	B=1.1.9;   V=freebsd	;; # The FreeBSD uhm...
  fsf|FSF)	B=1.1.101; V=FSF	;; # The Free Software Foundation
  [xX]@(11|c|f86)) B=1.1.103; V=xwindow	;; # X Consortium / XFree86(TM)
  expat)	B=1.1.105; V=expat	;; # expat developer team
  ?(lib)png)	B=1.1.107; V=libpng	;; # libpng whatever project
  lynx|cdk)	B=1.1.109; V=lynx	;; # Thomas Dickey (lynx, cdk)
  gpc)		B=1.1.111; V=gpc	;; # GNU Pascal
  tg)		B=1.1.201; V=tg		;; # Thorsten Glaser
  bsiegert)	B=1.1.203; V=bsiegert	;; # Benny Siegert
# wbx)		B=1.1.205; V=wbx	;; # Waldemar Brodkorb
  cnuke)	B=1.1.207; V=cnuke	;; # Jupp (Josef) Söntgen
# dave)		B=1.1.209; V=dave	;; # Dave Steinberg
  sap|stephen)	B=1.1.211; V=sap	;; # Stephen Paskaluk
  tyler)	B=1.1.215; V=tyler	;; # R. Tyler Ballance
  *)		print -r -- Error: Vendor Branch $branch non-existant.
		exit 1			;;
}

tag="$1"
tagerr=0

case $module {
binutils)
	[[ $tag = [0-9][0-9]@(0[1-9]|1[0-2])@(0[1-9]|[1-2][0-9]|3[01]) ]] || tagerr=1
	realtag=binutils-20$tag
	tagformat=YYMMDD
	if [[ $(basename $(readlink -nf .)) != binutils-+([0-9]) ]]; then
		print Error: must be in combined src directory to commit.
		exit 1
	fi
	if [[ ! -d gdb ]]; then
		print Error: must be in combined src directory to commit.
		exit 1
	fi
	;;
cvs)
	print -u2 not implemented yet
	exit 1
	;;
lynx)
	[[ $tag = lynx-[2-9]_+([0-9])_+([0-9])?(dev_+([0-9])?([a-z])) ]] \
	    || tagerr=1
	realtag=$tag
	tagformat=lynx-2_8_xdev_ya
	if [[ ! -e LYHelp.hin ]]; then
		print Error: must be in src directory to commit.
		exit 1
	fi
	;;
openbsd)
	[[ $tag = 20[0-9][0-9]@(0[1-9]|1[0-2])@(0[1-9]|[1-2][0-9]|3[01])@([01][0-9]|2[0-3])[0-5][0-9] ]] \
	    || tagerr=1
	realtag=cvs-$tag
	tagformat=YYYYMMDDhhmm
	if [[ $(basename $(readlink -nf .)) != src ]]; then
		print Error: must be in src directory to commit.
		exit 1
	fi
	;;
rcs)
	print -u2 not implemented yet
	exit 1
	;;
texinfo)
	print -u2 not implemented yet
	exit 1
	;;
-)
	if [[ $tag = 20[0-9][0-9]@(0[1-9]|1[0-2])@(0[1-9]|[1-2][0-9]|3[01])@([01][0-9]|2[0-3])[0-5][0-9] ]]; then
		realtag=cvs-$tag
	elif [[ $tag = -* ]]; then
		realtag=${tag#-}
	else
		tagerr=1
	fi
	tagformat="YYYYMMDDhhmm or -free"
	;;
}

if [[ $tagerr = 1 ]]; then
	print Error: tag is not in $tagformat format.
	exit 1
fi

case $module {
binutils)
	for f in .* *; do
		[[ -f $f ]] && rm "$f"
	done
	;;
}

[[ -n $IGNORELIST ]] && rm -rf $IGNORELIST
find . -type f | xargs chmod a-x

${DO_CVS:-cvs} -z3 -d ${CVSROOT:-/cvs} import -I ! -I CVS -I .svn \
    -b $B $vpath $V $realtag 2>&1

print ========= Imported with Tag: $realtag =========
