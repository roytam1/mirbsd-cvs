#!/bin/mksh
# $MirOS: src/etc/monthly,v 1.9 2007/04/17 22:32:42 tg Exp $
# $OpenBSD: monthly,v 1.5 1998/02/02 23:08:57 millert Exp $

umask 022
export TZ=UTC PATH=/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin:/usr/mpkg/bin
cd /

print RUNTIME=$(date +%J)

if [ -f /etc/monthly.local ];then
	echo ""
	echo "Running monthly.local:"
	. /etc/monthly.local
else
	echo "Nothing to do!"
fi

[[ -e /var/log/wtmp.0 ]] && gzip -n9 /var/log/wtmp.0
if [[ -e /var/log/wtmp.0.gz ]]; then
	echo ""
	echo "Doing login accounting for the past month:"
	gzip -dc /var/log/wtmp.0 | ac -pw - | sort -nr +1
fi
