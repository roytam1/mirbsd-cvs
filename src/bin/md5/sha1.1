.\"	$OpenBSD: sha1.1,v 1.19 2004/05/16 18:31:31 otto Exp $
.\"
.\" Copyright (c) 2003, 2004 Todd C. Miller <Todd.Miller@courtesan.com>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.\" Sponsored in part by the Defense Advanced Research Projects
.\" Agency (DARPA) and Air Force Research Laboratory, Air Force
.\" Materiel Command, USAF, under agreement number F39502-99-1-0512.
.\"
.\"-
.\" Try to make GNU groff and AT&T nroff more compatible
.\" * ` generates ‘ in groff, so use \`
.\" * ' generates ’ in groff, \' generates ´, so use \*(aq
.\" * - generates ‐ in groff, \- generates −, fixed in tmac/mdoc/doc-groff
.\"   thus use - for hyphens and \- for minus signs and option dashes
.\" * ~ is size-reduced and placed atop in groff, so use \*(TI
.\" * ^ is size-reduced and placed atop in groff, so use \*(ha
.\" * \(en does not work in nroff, so use \*(en
.ie \n(.g \{\
.	ds aq \(aq
.	ds TI \(ti
.	ds ha \(ha
.	ds en \(en
.\}
.el \{\
.	ds aq '
.	ds TI ~
.	ds ha ^
.	ds en \(em
.\}
.\"
.\" Implement .Dd with the Mdocdate RCS keyword
.rn Dd xD
.de Dd
.ie \\$1$Mdocdate: \{\
.	xD \\$2 \\$3, \\$4
.\}
.el .xD \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
..
.\"
.\" .Dd must come before definition of .Mx, because when called
.\" with -mandoc, it might implement .Mx itself, but we want to
.\" use our own definition. And .Dd must come *first*, always.
.Dd $Mdocdate: April 17 2008 $
.\"
.\" Implement .Mx (MirBSD)
.de Mx
.nr cF \\n(.f
.nr cZ \\n(.s
.ds aa \&\f\\n(cF\s\\n(cZ
.if \\n(aC==0 \{\
.	ie \\n(.$==0 \&MirOS\\*(aa
.	el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.\}
.if \\n(aC>\\n(aP \{\
.	nr aP \\n(aP+1
.	ie \\n(C\\n(aP==2 \{\
.		as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.		ie \\n(aC>\\n(aP \{\
.			nr aP \\n(aP+1
.			nR
.		\}
.		el .aZ
.	\}
.	el \{\
.		as b1 \&MirOS\\*(aa
.		nR
.	\}
.\}
..
.Dt SHA1 1
.Os
.Sh NAME
.Nm sha1
.Nd calculate a message-digest fingerprint (checksum) for a file
.Sh SYNOPSIS
.Nm
.Bk -words
.Op Fl b
.Oo
.Fl p | s Ar string |
.Ar file ...
.Oc
.Ek
.Nm
.Bk -words
.Fl G
.Op Ar file ...
.Ek
.Nm
.Bk -words
.Fl t | x |
.Fl c Op Ar checklist ...
.Ek
.Nm sha1sum
.Op Fl b | t
.Op Ar file ...
.Sh DESCRIPTION
.Nm
takes as input a message of arbitrary length and produces
as output a 160-bit "fingerprint" or "message digest" of the input.
It is conjectured that it is computationally infeasible to produce
two messages having the same message digest, or to produce any
message having a given prespecified target message digest.
.Pp
The
.Em SHA-1
algorithm is intended for digital signature applications, where a
large file must be "compressed" in a secure manner before being
encrypted with a private (secret) key under a public-key cryptosystem
such as
.Em RSA .
However, recently the SHA family's (SHA-0, SHA-1, SHA-2 (SHA-384 and
SHA-512) all share the same design) weakness has been proven in reduced
versions of SHA-1 and partially SHA-2 and collisions for SHA-1 can be found.
The use of other hash functions is encouraged; however, as RIPEMD-160
is only little more secure, combining hashes from different families or,
better, different approaches (Tiger, Whirlpool) is recommended.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl b
Print the checksum as binary to stdout.
Ignored in GNU mode.
.It Xo
.Fl c
.Op Ar checklist ...
.Xc
Compares all checksums contained in the file
.Ar checklist
with newly computed checksums for the corresponding files.
Output consists of the digest used, the file name,
and an OK or FAILED for the result of the comparison.
This will validate any of the supported checksums (see
.Xr cksum 1 ) .
If no file is given, stdin is used.
.It Fl G
Enable GNU
.Nm md5sum
compatible output mode.
Can also be enabled by calling this programme as
.Nm sha1sum .
.It Fl p
Echoes stdin to stdout and appends the
.Em SHA-1
sum to stdout.
.It Fl s Ar string
Prints a checksum of the given
.Ar string .
.It Fl t
Runs a built-in time trial.
Ignored in GNU mode.
.It Fl x
Runs a built-in test script.
.El
.Pp
The SHA-1
sum of each file listed on the command line is printed after the options
are processed.
.Pp
The
.Nm
command is shorthand for
.Bd -literal -offset indent
cksum -a sha1
.Ed
.Pp
The
.Xr cksum 1
command can also be used to compute digests from the SHA-2 family:
sha256, sha384 and sha512.
.Sh SEE ALSO
.Xr cksum 1 ,
.Xr md5 1 ,
.Xr rmd160 1
.Rs
.%A J. Burrows
.%T The Secure Hash Standard
.%O FIPS PUB 180-1
.Re
.Rs
.%A D. Eastlake and P. Jones
.%T US Secure Hash Algorithm 1
.%O RFC 3174
.Re
