# $MirOS: src/distrib/i386/common/list,v 1.21 2006/07/05 14:53:56 tg Exp $
# $OpenBSD: list,v 1.15 2005/05/04 17:08:07 miod Exp $

# copy the crunched binary, link to it, and kill it
COPY	${OBJDIR}/instbin			instbin
LINK	instbin					bin/cat
LINK	instbin					bin/chmod bin/chgrp sbin/chown usr/bin/chflags
LINK	instbin					bin/cp
LINK	instbin					bin/date
LINK	instbin					bin/dd
LINK	instbin					bin/df
LINK	instbin					bin/ed
LINK	instbin					bin/hostname
LINK	instbin					bin/ln
LINK	instbin					bin/ls
LINK	instbin					bin/md5 bin/cksum bin/sum bin/sha1 bin/rmd160
LINK	instbin					bin/mkdir
LINK	instbin					bin/mksh bin/sh
LINK	instbin					bin/mv
LINK	instbin					bin/pax bin/cpio bin/tar
LINK	instbin					bin/rm
LINK	instbin					bin/sleep
LINK	instbin					bin/stty
LINK	instbin					sbin/dhclient
LINK	instbin					sbin/disklabel
LINK	instbin					sbin/dmesg
LINK	instbin					sbin/fdisk
LINK	instbin					sbin/fsck
LINK	instbin					sbin/fsck_ffs
LINK	instbin					sbin/ifconfig
LINK	instbin					sbin/init
LINK	instbin					sbin/mknod
LINK	instbin					sbin/mount
LINK	instbin					sbin/mount_cd9660
LINK	instbin					sbin/mount_ext2fs
LINK	instbin					sbin/mount_ffs
LINK	instbin					sbin/mount_msdos
LINK	instbin					sbin/newfs sbin/mount_mfs
LINK	instbin					sbin/ping
LINK	instbin					sbin/reboot sbin/halt
LINK	instbin					sbin/route
LINK	instbin					sbin/swapctl
LINK	instbin					sbin/umount
LINK	instbin					sbin/wicontrol
LINK	instbin					usr/bin/compress usr/bin/gzip usr/bin/gunzip
LINK	instbin					usr/bin/ftp
LINK	instbin					usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin					usr/bin/hexdump usr/bin/hd usr/bin/od
LINK	instbin					usr/bin/mktemp
LINK	instbin					usr/bin/nc
LINK	instbin					usr/bin/sed
LINK	instbin					usr/mdec/installboot
LINK	instbin					usr/sbin/sysctl
LINK	instbin					usr/sbin/vnconfig
ARGVLINK mksh					-mksh
ARGVLINK mksh					-sh

# needed by dhclient
SCRIPT	${DESTDIR}/sbin/dhclient-script 	sbin/dhclient-script
SPECIAL	chmod 755 sbin/dhclient-script

# copy the MAKEDEV script and make some devices
SCRIPT ${DESTDIR}/dev/MAKEDEV			dev/MAKEDEV
SPECIAL	cd dev; chmod 555 MAKEDEV; ./MAKEDEV ramdisk

# we need the contents of /usr/mdec
COPY	${DESTDIR}/usr/mdec/boot		usr/mdec/boot
COPY	${DESTDIR}/usr/mdec/bootxx		usr/mdec/bootxx

# various files that we need in /etc for the install
SCRIPT	${DESTDIR}/etc/disktab			etc/disktab.shadow
COPY	${DESTDIR}/etc/group			etc/group
COPY	${CURDIR}/../../miniroot/protocols	etc/protocols
COPY	${CURDIR}/../../miniroot/services	etc/services
COPY	${CURDIR}/../../miniroot/shells		etc/shells
COPY	${DESTDIR}/etc/spwd.db			etc/spwd.db
TERMCAP	vt100,vt220,wsvt25,wsvtg,dumb		usr/share/misc/termcap

SYMLINK	/tmp/disktab.shadow			etc/disktab
SYMLINK	/tmp/fstab.shadow			etc/fstab
SYMLINK	/tmp/hosts				etc/hosts
SYMLINK	/tmp/resolv.conf.shadow			etc/resolv.conf

# and the installation tools
SCRIPT	${CURDIR}/../../miniroot/dot.profile	.profile
SCRIPT	${CURDIR}/../../miniroot/install.sh	install
SCRIPT	${CURDIR}/../common/install.md		install.md
SCRIPT	${CURDIR}/../../miniroot/install.sub	install.sub
SPECIAL	chmod 755 install

# and a few bits of entropy
SPECIAL	dd if=/dev/arandom bs=64 count=1 of=var/db/host.random
